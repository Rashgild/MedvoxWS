<html>
<head>
<title>Sql_request.class</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #606366; font-weight: normal; font-style: normal; }
.s0 { color: rgb(128,128,128); }
.s1 { color: rgb(169,183,198); }
.s2 { color: rgb(204,120,50); }
.s3 { color: rgb(106,135,89); }
</style>
</head>
<BODY BGCOLOR="#2b2b2b">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
Sql_request.class</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">//</span><span class="s1"> 
</span><span class="s0">// Source code recreated from a .class file by IntelliJ IDEA</span><span class="s1"> 
</span><span class="s0">// (powered by Fernflower decompiler)</span><span class="s1"> 
</span><span class="s0">//</span><span class="s1"> 
 
</span><span class="s2">package </span><span class="s1">ru.web.SQL</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s2">public class </span><span class="s1">Sql_request { 
    </span><span class="s2">public static </span><span class="s1">String[] URL</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s2">public static </span><span class="s1">String[] Name</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s2">public static </span><span class="s1">String[] Pwd</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s2">public static </span><span class="s1">String[] Ip</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s2">public static </span><span class="s1">String[] Port</span><span class="s2">;</span><span class="s1"> 
 
    </span><span class="s2">public </span><span class="s1">Sql_request() { 
    } 
 
    </span><span class="s2">public static </span><span class="s1">String SelectSpecialization() { 
        String req = </span><span class="s3">&quot;select vwf.id ,vwf.name</span><span class="s2">\n</span><span class="s3">from WorkFunction as wf </span><span class="s2">\n</span><span class="s3">left join Worker as w on w.id=wf.worker_id</span><span class="s2">\n</span><span class="s3">left join Patient as p on p.id=w.person_id</span><span class="s2">\n</span><span class="s3">inner join VocWorkFunction vwf on vwf.id=wf.workFunction_id</span><span class="s2">\n</span><span class="s3">left join WorkCalendar wc on wc.workFunction_id=wf.id</span><span class="s2">\n</span><span class="s3">left join workcalendarday wcd on wcd.workcalendar_id=wc.id</span><span class="s2">\n</span><span class="s3">left join workcalendartime wct on wct.workCalendarDay_id=wcd.id</span><span class="s2">\n</span><span class="s3">left join mislpu mlGr on mlGr.id=wf.lpu_id</span><span class="s2">\n</span><span class="s3">where wc.id is not null</span><span class="s2">\n</span><span class="s3">and wcd.calendardate&gt;=current_date</span><span class="s2">\n</span><span class="s3">and wf.group_id is null </span><span class="s2">\n</span><span class="s3">and (wf.archival is null or wf.archival=</span><span class="s2">\'</span><span class="s3">0</span><span class="s2">\'</span><span class="s3">)</span><span class="s2">\n</span><span class="s3">and (wf.isnoviewremoteuser  =</span><span class="s2">\'</span><span class="s3">0</span><span class="s2">\'</span><span class="s3"> or wf.isnoviewremoteuser is null)</span><span class="s2">\n</span><span class="s3">and coalesce(w.lpu_id,wf.lpu_id)=180</span><span class="s2">\n</span><span class="s3">and wct.medCase_id is null and wct.prepatient_id is null and (wct.prepatientinfo is null or wct.prepatientinfo=</span><span class="s2">\'\'</span><span class="s3">) and wct.reserveType_id is null</span><span class="s2">\n</span><span class="s3">group by vwf.id, vwf.name</span><span class="s2">\n</span><span class="s3">having count(wct.id)&gt;0&quot;</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">return </span><span class="s1">req</span><span class="s2">;</span><span class="s1"> 
    } 
 
    </span><span class="s2">public static </span><span class="s1">String SelectDoctor(Integer id_spec) { 
        String req = </span><span class="s3">&quot;SELECT</span><span class="s2">\n</span><span class="s3">wf.id , vwf.name, case when wf.dtype=</span><span class="s2">\'</span><span class="s3">PersonalWorkFunction</span><span class="s2">\'</span><span class="s3"> then p.lastname</span><span class="s2">\n</span><span class="s3">else wf.groupname end as lastname,</span><span class="s2">\n</span><span class="s3">coalesce(p.firstname,</span><span class="s2">\'\'</span><span class="s3">) as firstname, coalesce(p.middlename,</span><span class="s2">\'\'</span><span class="s3">) as middlename</span><span class="s2">\n</span><span class="s3">from WorkFunction as wf</span><span class="s2">\n</span><span class="s3">left join Worker as w on w.id=wf.worker_id</span><span class="s2">\n</span><span class="s3">left join Patient as p on p.id=w.person_id</span><span class="s2">\n</span><span class="s3">inner join VocWorkFunction vwf on vwf.id=wf.workFunction_id</span><span class="s2">\n</span><span class="s3">left join WorkCalendar wc on wc.workFunction_id=wf.id</span><span class="s2">\n</span><span class="s3">left join mislpu mlGr on mlGr.id=wf.lpu_id</span><span class="s2">\n</span><span class="s3">left join workcalendarday wcd on wcd.workcalendar_id=wc.id</span><span class="s2">\n</span><span class="s3">left join workcalendartime wct on wct.workCalendarDay_id=wcd.id</span><span class="s2">\n</span><span class="s3">where wc.id is not null</span><span class="s2">\n</span><span class="s3">and wf.group_id is null</span><span class="s2">\n</span><span class="s3">and (wf.archival is null or wf.archival=</span><span class="s2">\'</span><span class="s3">0</span><span class="s2">\'</span><span class="s3">)</span><span class="s2">\n</span><span class="s3">and (wf.isnoviewremoteuser  =</span><span class="s2">\'</span><span class="s3">0</span><span class="s2">\'</span><span class="s3"> or wf.isnoviewremoteuser is null)</span><span class="s2">\n</span><span class="s3">and coalesce(wf.lpu_id,w.lpu_id)=180</span><span class="s2">\n</span><span class="s3">and wct.prepatient_id is null</span><span class="s2">\n</span><span class="s3">and (wct.prepatientinfo is null or wct.prepatientinfo=</span><span class="s2">\'\'</span><span class="s3">) </span><span class="s2">\n</span><span class="s3">and wct.reserveType_id is null</span><span class="s2">\n</span><span class="s3">and wct.medCase_id is null</span><span class="s2">\n</span><span class="s3">and wct.createprerecord is null</span><span class="s2">\n</span><span class="s3">and wcd.calendardate&gt;=current_date</span><span class="s2">\n</span><span class="s3">and vwf.id = &quot; </span><span class="s1">+ id_spec + </span><span class="s3">&quot;group by wf.id, vwf.name, p.lastname ,p.firstname,p.middlename</span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ </span><span class="s3">&quot;having count(wct.id)&gt;0&quot;</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">return </span><span class="s1">req</span><span class="s2">;</span><span class="s1"> 
    } 
 
    </span><span class="s2">public static </span><span class="s1">String SelectDateSecond(Integer id_doctor</span><span class="s2">, </span><span class="s1">Integer id_specialization) { 
        String req = </span><span class="s3">&quot;select  max(wcd.id) as id, to_char(wcd.calendardate,</span><span class="s2">\'</span><span class="s3">dd.mm.yyyy</span><span class="s2">\'</span><span class="s3">) as date</span><span class="s2">\n</span><span class="s3"> from workCalendar wc </span><span class="s2">\n</span><span class="s3"> left join workcalendarday wcd on wcd.workcalendar_id=wc.id</span><span class="s2">\n</span><span class="s3"> left join workcalendartime wct on wct.workcalendarday_id=wcd.id</span><span class="s2">\n</span><span class="s3"> left join workfunction wf on wf.id=wc.workfunction_id</span><span class="s2">\n</span><span class="s3"> left join vocworkfunction vwf on vwf.id=wf.workfunction_id</span><span class="s2">\n</span><span class="s3"> where </span><span class="s2">\n</span><span class="s3"> wcd.calendardate&gt;=current_date</span><span class="s2">\n</span><span class="s3">and wct.medCase_id is null and wct.prepatient_id is null and (wct.prepatientinfo is null or wct.prepatientinfo=</span><span class="s2">\'\'</span><span class="s3">) </span><span class="s2">\n</span><span class="s3">and wct.reserveType_id is null</span><span class="s2">\n</span><span class="s3">and wf.id= </span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ id_doctor + </span><span class="s3">&quot;and  vwf.id= </span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ id_specialization + </span><span class="s3">&quot;group by wcd.calendardate</span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ </span><span class="s3">&quot;order by wcd.calendardate&quot;</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">return </span><span class="s1">req</span><span class="s2">;</span><span class="s1"> 
    } 
 
    </span><span class="s2">public static </span><span class="s1">String SelectTimeSecond(Integer id_date) { 
        String req = </span><span class="s3">&quot;select max(wct.id) as id,cast(wct.timeFrom as varchar(5)) as time</span><span class="s2">\n</span><span class="s3">from WorkCalendarTime wct</span><span class="s2">\n</span><span class="s3">left join VocServiceReserveType vsrt on vsrt.id=wct.reserveType_id</span><span class="s2">\n</span><span class="s3">left join WorkCalendarDay wcd on wcd.id=wct.workCalendarDay_id</span><span class="s2">\n</span><span class="s3">left join workcalendar wc on wc.id=wcd.workcalendar_id</span><span class="s2">\n</span><span class="s3">left join workfunction wf on wf.id=wc.workfunction_id</span><span class="s2">\n</span><span class="s3">left join vocworkfunction vwf on vwf.id=wf.workfunction_id</span><span class="s2">\n</span><span class="s3">where </span><span class="s2">\n</span><span class="s3">wct.workCalendarDay_id = </span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ id_date + </span><span class="s3">&quot;--vwf.id=</span><span class="s2">\'</span><span class="s3">35</span><span class="s2">\'</span><span class="s3"> and wcd.calendardate = (select calendardate from workcalendarday where id =</span><span class="s2">\'</span><span class="s3">127095</span><span class="s2">\'</span><span class="s3">) —Поиск по специальностям и дню</span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ </span><span class="s3">&quot;and wct.medCase_id is null and wct.prepatient_id is null and (wct.prepatientinfo is null or wct.prepatientinfo=</span><span class="s2">\'\'</span><span class="s3">) and wct.reserveType_id is null</span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ </span><span class="s3">&quot;and wcd.calendardate&gt;=current_date</span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ </span><span class="s3">&quot;group by wct.timeFrom</span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ </span><span class="s3">&quot;order by wct.timeFrom&quot;</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">return </span><span class="s1">req</span><span class="s2">;</span><span class="s1"> 
    } 
 
    </span><span class="s2">public static </span><span class="s1">String SelectAllInformation(Integer id_spec</span><span class="s2">, </span><span class="s1">Integer id_date</span><span class="s2">, </span><span class="s1">Integer id_time) { 
        String req = </span><span class="s3">&quot;select vwf.name, p.lastname, p.firstname, p.middlename,to_char(wcd.calendardate,</span><span class="s2">\'</span><span class="s3">dd.mm.yyyy</span><span class="s2">\'</span><span class="s3">) as date ,cast(wct.timeFrom as varchar(5)) as time</span><span class="s2">\n</span><span class="s3">from WorkFunction as wf </span><span class="s2">\n</span><span class="s3">--left join  WorkCalendarTime as wdd</span><span class="s2">\n</span><span class="s3">left join Worker as w on w.id=wf.worker_id</span><span class="s2">\n</span><span class="s3">left join Patient as p on p.id=w.person_id</span><span class="s2">\n</span><span class="s3">inner join VocWorkFunction vwf on vwf.id=wf.workFunction_id</span><span class="s2">\n</span><span class="s3">left join WorkCalendar wc on wc.workFunction_id=wf.id</span><span class="s2">\n</span><span class="s3">left join mislpu mlGr on mlGr.id=wf.lpu_id</span><span class="s2">\n</span><span class="s3">left join workcalendarday wcd on wcd.workcalendar_id=wc.id</span><span class="s2">\n</span><span class="s3">left join workcalendartime wct on wct.workcalendarday_id=wcd.id</span><span class="s2">\n</span><span class="s3">where wc.id is not null</span><span class="s2">\n</span><span class="s3">and wf.group_id is null </span><span class="s2">\n</span><span class="s3">and (wf.archival is null or wf.archival=</span><span class="s2">\'</span><span class="s3">0</span><span class="s2">\'</span><span class="s3">)</span><span class="s2">\n</span><span class="s3">and (wf.isnoviewremoteuser  =</span><span class="s2">\'</span><span class="s3">0</span><span class="s2">\'</span><span class="s3"> or wf.isnoviewremoteuser is null)</span><span class="s2">\n</span><span class="s3">and coalesce(w.lpu_id,wf.lpu_id)=180</span><span class="s2">\n</span><span class="s3">and vwf.id  = &quot; </span><span class="s1">+ id_spec + </span><span class="s3">&quot;and wcd.id = &quot; </span><span class="s1">+ id_date + </span><span class="s3">&quot;and wct.id = &quot; </span><span class="s1">+ id_time</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">return </span><span class="s1">req</span><span class="s2">;</span><span class="s1"> 
    } 
 
    </span><span class="s2">public static </span><span class="s1">String SelectDateFirst(Integer id_specialization) { 
        String req = </span><span class="s3">&quot;select  max(wcd.id) as id, to_char(wcd.calendardate,</span><span class="s2">\'</span><span class="s3">dd.mm.yyyy</span><span class="s2">\'</span><span class="s3">) as date</span><span class="s2">\n</span><span class="s3"> from workCalendar wc </span><span class="s2">\n</span><span class="s3"> left join workcalendarday wcd on wcd.workcalendar_id=wc.id</span><span class="s2">\n</span><span class="s3"> left join workcalendartime wct on wct.workcalendarday_id=wcd.id</span><span class="s2">\n</span><span class="s3"> left join workfunction wf on wf.id=wc.workfunction_id</span><span class="s2">\n</span><span class="s3"> left join vocworkfunction vwf on vwf.id=wf.workfunction_id</span><span class="s2">\n</span><span class="s3"> where </span><span class="s2">\n</span><span class="s3"> wcd.calendardate&gt;=current_date</span><span class="s2">\n</span><span class="s3">and wct.medCase_id is null and wct.prepatient_id is null and (wct.prepatientinfo is null or wct.prepatientinfo=</span><span class="s2">\'\'</span><span class="s3">) </span><span class="s2">\n</span><span class="s3">and wct.reserveType_id is null</span><span class="s2">\n</span><span class="s3">and  vwf.id= </span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ id_specialization + </span><span class="s3">&quot;group by wcd.calendardate</span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ </span><span class="s3">&quot;order by wcd.calendardate&quot;</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">return </span><span class="s1">req</span><span class="s2">;</span><span class="s1"> 
    } 
 
    </span><span class="s2">public static </span><span class="s1">String SelectTimeFirst(Integer id_specialization</span><span class="s2">, </span><span class="s1">Integer id_date) { 
        String req = </span><span class="s3">&quot;</span><span class="s2">\n\n</span><span class="s3">select max(wct.id) as id,cast(wct.timeFrom as varchar(5)) as time </span><span class="s2">\n</span><span class="s3">     from WorkCalendarTime wct</span><span class="s2">\n</span><span class="s3">     left join VocServiceReserveType vsrt on vsrt.id=wct.reserveType_id</span><span class="s2">\n</span><span class="s3">     left join WorkCalendarDay wcd on wcd.id=wct.workCalendarDay_id</span><span class="s2">\n</span><span class="s3">     left join workcalendar wc on wc.id=wcd.workcalendar_id</span><span class="s2">\n</span><span class="s3">     left join workfunction wf on wf.id=wc.workfunction_id</span><span class="s2">\n</span><span class="s3">     left join vocworkfunction vwf on vwf.id=wf.workfunction_id</span><span class="s2">\n</span><span class="s3">     where </span><span class="s2">\n</span><span class="s3">    vwf.id= &quot; </span><span class="s1">+ id_specialization + </span><span class="s3">&quot;  and wcd.calendardate = (select calendardate from workcalendarday where id = &quot; </span><span class="s1">+ id_date + </span><span class="s3">&quot;)&quot; </span><span class="s1">+ </span><span class="s3">&quot;    and wct.medCase_id is null and wct.prepatient_id is null and (wct.prepatientinfo is null or wct.prepatientinfo=</span><span class="s2">\'\'</span><span class="s3">) and wct.reserveType_id is null</span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ </span><span class="s3">&quot;    and wcd.calendardate&gt;=current_date</span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ </span><span class="s3">&quot;group by wct.timeFrom</span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ </span><span class="s3">&quot;     order by wct.timeFrom&quot;</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">return </span><span class="s1">req</span><span class="s2">;</span><span class="s1"> 
    } 
 
    </span><span class="s2">public static </span><span class="s1">String SelectPatients(Integer bithdate) { 
        String req = </span><span class="s3">&quot;select id, lastname, firstname, middlename,to_char(birthday,</span><span class="s2">\'</span><span class="s3">dd.mm.yyyy</span><span class="s2">\'</span><span class="s3">) as birthday  </span><span class="s2">\n</span><span class="s3">from Patient </span><span class="s2">\n</span><span class="s3">where noactuality is null</span><span class="s2">\n</span><span class="s3">and deathdate is null </span><span class="s2">\n</span><span class="s3">and birthday =</span><span class="s2">\'</span><span class="s3">&quot; </span><span class="s1">+ bithdate + </span><span class="s3">&quot;</span><span class="s2">\'</span><span class="s3">&quot;</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">return </span><span class="s1">req</span><span class="s2">;</span><span class="s1"> 
    } 
 
    </span><span class="s2">public static </span><span class="s1">String UpdatePatient(Integer patient_id</span><span class="s2">, </span><span class="s1">Integer time_id) { 
        String req = </span><span class="s3">&quot;update WorkCalendarTime</span><span class="s2">\n</span><span class="s3">        set</span><span class="s2">\n</span><span class="s3"> createprerecord = </span><span class="s2">\'</span><span class="s3">TestMedVox</span><span class="s2">\'</span><span class="s3">,</span><span class="s2">\n</span><span class="s3"> createdateprerecord = current_date,</span><span class="s2">\n</span><span class="s3"> createtimeprerecord= current_time,</span><span class="s2">\n</span><span class="s3"> prepatient_id = &quot; </span><span class="s1">+ patient_id + </span><span class="s3">&quot; where id= &quot; </span><span class="s1">+ time_id + </span><span class="s3">&quot;        returning id&quot;</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">return </span><span class="s1">req</span><span class="s2">;</span><span class="s1"> 
    } 
 
    </span><span class="s2">public static </span><span class="s1">String CheckPatientEmpty(Integer time_id) { 
        String req = </span><span class="s3">&quot;select prepatient_id from WorkCalendarTime where id=&quot; </span><span class="s1">+ time_id</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">return </span><span class="s1">req</span><span class="s2">;</span><span class="s1"> 
    } 
} 
</span></pre>
</body>
</html>