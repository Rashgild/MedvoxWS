<html>
<head>
<title>WebServPublisher.class</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #606366; font-weight: normal; font-style: normal; }
.s0 { color: rgb(128,128,128); }
.s1 { color: rgb(169,183,198); }
.s2 { color: rgb(204,120,50); }
.s3 { color: rgb(104,151,187); }
.s4 { color: rgb(106,135,89); }
</style>
</head>
<BODY BGCOLOR="#2b2b2b">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
WebServPublisher.class</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">//</span><span class="s1"> 
</span><span class="s0">// Source code recreated from a .class file by IntelliJ IDEA</span><span class="s1"> 
</span><span class="s0">// (powered by Fernflower decompiler)</span><span class="s1"> 
</span><span class="s0">//</span><span class="s1"> 
 
</span><span class="s2">package </span><span class="s1">ru.web.endpoint</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s2">import </span><span class="s1">java.io.BufferedReader</span><span class="s2">;</span><span class="s1"> 
</span><span class="s2">import </span><span class="s1">java.io.IOException</span><span class="s2">;</span><span class="s1"> 
</span><span class="s2">import </span><span class="s1">java.io.InputStream</span><span class="s2">;</span><span class="s1"> 
</span><span class="s2">import </span><span class="s1">java.io.InputStreamReader</span><span class="s2">;</span><span class="s1"> 
</span><span class="s2">import </span><span class="s1">java.sql.ResultSet</span><span class="s2">;</span><span class="s1"> 
</span><span class="s2">import </span><span class="s1">java.util.ArrayList</span><span class="s2">;</span><span class="s1"> 
</span><span class="s2">import </span><span class="s1">java.util.logging.Level</span><span class="s2">;</span><span class="s1"> 
</span><span class="s2">import </span><span class="s1">java.util.logging.Logger</span><span class="s2">;</span><span class="s1"> 
</span><span class="s2">import </span><span class="s1">javax.xml.ws.Endpoint</span><span class="s2">;</span><span class="s1"> 
</span><span class="s2">import </span><span class="s1">ru.web.SQL.Sql_request</span><span class="s2">;</span><span class="s1"> 
</span><span class="s2">import </span><span class="s1">ru.web.SQL.sql_connect</span><span class="s2">;</span><span class="s1"> 
</span><span class="s2">import </span><span class="s1">ru.web.service.WebServiceImpl</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s2">public class </span><span class="s1">WebServPublisher { 
    </span><span class="s2">public </span><span class="s1">WebServPublisher() { 
    } 
 
    </span><span class="s2">public static void </span><span class="s1">main(String... args) </span><span class="s2">throws </span><span class="s1">IOException { 
        GetConfiguration()</span><span class="s2">;</span><span class="s1"> 
        Endpoint.publish(Sql_request.Ip[</span><span class="s3">1</span><span class="s1">] + Sql_request.Port[</span><span class="s3">1</span><span class="s1">] + </span><span class="s4">&quot;/webservice/start&quot;</span><span class="s2">, new </span><span class="s1">WebServiceImpl())</span><span class="s2">;</span><span class="s1"> 
        ResultSet result = </span><span class="s2">null;</span><span class="s1"> 
        System.out.println(</span><span class="s4">&quot;Сервер запущен успешно!&quot;</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        System.out.println(</span><span class="s4">&quot;WSDL-файл по адресу &quot; </span><span class="s1">+ Sql_request.Ip[</span><span class="s3">1</span><span class="s1">] + Sql_request.Port[</span><span class="s3">1</span><span class="s1">] + </span><span class="s4">&quot;/webservice/start?wsdl&quot;</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        System.out.println(</span><span class="s4">&quot;Строка подключению к БД: &quot; </span><span class="s1">+ Sql_request.URL[</span><span class="s3">1</span><span class="s1">])</span><span class="s2">;</span><span class="s1"> 
        System.out.println(</span><span class="s4">&quot;Попытка подключения к БД...&quot;</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
 
        </span><span class="s2">try </span><span class="s1">{ 
            result = sql_connect.SQL_Select(</span><span class="s4">&quot;select id from Patient limit 1&quot;</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
            System.out.println(</span><span class="s4">&quot;...Подключено!&quot;</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        } </span><span class="s2">catch </span><span class="s1">(Exception var3) { 
            var3.printStackTrace()</span><span class="s2">;</span><span class="s1"> 
            Logger.getLogger(WebServiceImpl.</span><span class="s2">class</span><span class="s1">.getName()).log(Level.SEVERE</span><span class="s2">, </span><span class="s1">(String)</span><span class="s2">null, </span><span class="s1">var3)</span><span class="s2">;</span><span class="s1"> 
        } 
 
    } 
 
    </span><span class="s2">private static void </span><span class="s1">GetConfiguration() </span><span class="s2">throws </span><span class="s1">IOException { 
        InputStream inp = ClassLoader.getSystemClassLoader().getResourceAsStream(</span><span class="s4">&quot;configuration.conf&quot;</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        BufferedReader reader = </span><span class="s2">new </span><span class="s1">BufferedReader(</span><span class="s2">new </span><span class="s1">InputStreamReader(inp))</span><span class="s2">;</span><span class="s1"> 
        ArrayList lines = </span><span class="s2">new </span><span class="s1">ArrayList()</span><span class="s2">;</span><span class="s1"> 
 
        String line</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">while</span><span class="s1">((line = reader.readLine()) != </span><span class="s2">null</span><span class="s1">) { 
            lines.add(line)</span><span class="s2">;</span><span class="s1"> 
        } 
 
        String strin = (String)lines.get(</span><span class="s3">0</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        Sql_request.URL = strin.split(</span><span class="s4">&quot;=&quot;</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        strin = (String)lines.get(</span><span class="s3">1</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        Sql_request.Name = strin.split(</span><span class="s4">&quot;=&quot;</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        strin = (String)lines.get(</span><span class="s3">2</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        Sql_request.Pwd = strin.split(</span><span class="s4">&quot;=&quot;</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        strin = (String)lines.get(</span><span class="s3">3</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        Sql_request.Ip = strin.split(</span><span class="s4">&quot;=&quot;</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        strin = (String)lines.get(</span><span class="s3">4</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        Sql_request.Port = strin.split(</span><span class="s4">&quot;=&quot;</span><span class="s1">)</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">if</span><span class="s1">(Sql_request.Pwd[</span><span class="s3">1</span><span class="s1">].equalsIgnoreCase(</span><span class="s4">&quot;null&quot;</span><span class="s1">)) { 
            Sql_request.Pwd[</span><span class="s3">1</span><span class="s1">] = </span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s1"> 
        } 
 
    } 
} 
</span></pre>
</body>
</html>